<!DOCTYPE html>
<html>
<head>
  <title>Blogging For Fun</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://www.w3schools.com/w3css/5/w3.css">
  <link rel="stylesheet" href="https://www.w3schools.com/lib/w3-theme-blue-grey.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <style>
    html, body, h1, h2, h3, h4, h5 {
      font-family: "Roboto", sans-serif;
      font-weight: 400;
    }

    h1 {
      font-size: 60px;
    }

    /* Future table styles
    table, th, td {
      border: 2px solid black;
      padding: 0px;
    }
    table {
      border-collapse: collapse;
    }
    td:nth-child(2), th:nth-child(2), td:nth-child(3), th:nth-child(3) {
      padding: 2px;
    }
    td:nth-child(3), th:nth-child(3) {
      padding: 2px;
      text-align: center;
    }
    */
  </style>

  <script>
    window.onload = function () {
     renderPosts();
    };

    function generateSideMenu() {
      const sideMenu = document.getElementById("side-menu");
      sideMenu.innerHTML = "";
      const posts = CRUD.getAllPosts();

      posts.forEach((post) => {
        const menuItem = document.createElement("button");
        menuItem.textContent = post.headline || "Untitled Post";
        menuItem.className = "w3-button w3-block w3-theme-l4";
        menuItem.onclick = () => {
          const targetPost = document.getElementById(post.key);
          if (targetPost) {
            targetPost.scrollIntoView({ behavior: "smooth" });
            window.scrollBy(0, -10);
          }
        };
        sideMenu.appendChild(menuItem);
      });
    }

    function togglePost() {
      const thisButton = this;
      const post = thisButton.closest(".post, .w3-card-4");
      const content = post.querySelector(".content");
      if (content.style.display === "none" || !content.style.display) {
        content.style.display = "block";
        thisButton.textContent = "Read Less";
      } else {
        content.style.display = "none";
        thisButton.textContent = "Read More";
      }
    }

    function expandAll() {
      document.querySelectorAll(".content").forEach((content) => {
        content.style.display = "block";
      });
      document.querySelectorAll(".post button[aria-label='Toggle post content'], .w3-card-4 button[aria-label='Toggle welcome post content']").forEach((button) => {
        button.textContent = "Read Less";
      });
    }

    function collapseAll() {
      document.querySelectorAll(".content").forEach((content) => {
        content.style.display = "none";
      });
      document.querySelectorAll(".post button[aria-label='Toggle post content'], .w3-card-4 button[aria-label='Toggle welcome post content']").forEach((button) => {
        button.textContent = "Read More";
      });
    }

    class CRUD {
      static createPost(key, value) {
        try {
          localStorage.setItem(key, JSON.stringify(value));
        } catch (e) {
          console.error("Error saving post:", e);
        }
      }

      static retrievePost(key) {
        try {
          const data = localStorage.getItem(key);
          return data ? JSON.parse(data) : null;
        } catch (e) {
          console.error("Error retrieving post:", e);
          return null;
        }
      }

      static updatePost(key, value) {
        this.createPost(key, value);
      }

      static deletePost(key) {
        try {
          localStorage.removeItem(key);
        } catch (e) {
          console.error("Error deleting post:", e);
        }
      }

      static getAllPosts() {
        const posts = [];
        for (let i = 0; i < localStorage.length; i++) {
          const key = localStorage.key(i);
          if (key.startsWith("post-")) {
            const post = this.retrievePost(key);
            if (post) posts.push(post);
          }
        }
        return posts.sort((a, b) => new Date(b.date) - new Date(a.date));
      }
    }

    function renderPosts() {
    const postContainer = document.querySelector(".post-container");
   //   const welcomePost = postContainer.querySelector(".w3-card-4.post-header")?.parentNode;
  //    postContainer.innerHTML = "";
   //   if (welcomePost) postContainer.appendChild(welcomePost);

      const posts = CRUD.getAllPosts();
      posts.forEach((post) => {
        const postElement = document.createElement("div");
        postElement.id = post.key;
        postElement.className = "post";
        postElement.style.cssText = "background-color: beige; padding: 12px; margin-bottom: 10px;";

        
        postElement.innerHTML = `
          <div class="post-header">
            <img src="${post.image}" alt="Image for ${post.headline}" class="w3-left w3-margin-right" style="width:150px">
            <span class="w3-right w3-opacity">
              <button onclick="togglePost.call(this)" aria-label="Toggle post content">Read More</button>
            </span>
            <div class="w3-right w3-margin-top">
              <button onclick="editPost('${post.key}')">Edit</button>
              <button onclick="deletePost('${post.key}')">Delete</button>
            </div>
            <h3 class="headline" style="text-align: center;">${post.headline}</h3><br>
            <p>${post.teaser}</p>
            <hr class="w3-clear"><hr>
          </div>
          <div class="content w3-justify" style="display:none">${post.content}</div>
        `;
        postContainer.appendChild(postElement);
      });

 //     generateSideMenu();
    }

 




    function editPost(postKey) {
      const post = CRUD.retrievePost(postKey);
      if (post) {
        document.getElementById("post-key").value = post.key;
        document.getElementById("post-headline").value = post.headline;
        document.getElementById("post-teaser").value = post.teaser;
        document.getElementById("post-content").value = post.content;
        document.getElementById("post-date").value = post.date;
        document.getElementById("new-post-form").dataset.editing = "true";
        document.getElementById("new-post-form").onsubmit = (e) => {
          e.preventDefault();
          const updatedPost = {
            key: document.getElementById("post-key").value,
            headline: document.getElementById("post-headline").value,
            teaser: document.getElementById("post-teaser").value,
            content: document.getElementById("post-content").value,
            image: document.getElementById("post-image").files[0]
              ? URL.createObjectURL(document.getElementById("post-image").files[0])
              : post.image,
            date: document.getElementById("post-date").value || post.date,
          };
          CRUD.updatePost(updatedPost.key, updatedPost);
          renderPosts();
          e.target.reset();
          document.getElementById("new-post-form").dataset.editing = "";
          document.getElementById("new-post-form").onsubmit = null;
        };
      }
    }

    function deletePost(postKey) {
      if (confirm("Delete this post?")) {
        CRUD.deletePost(postKey);
        renderPosts();
      }
    }

    document.addEventListener("DOMContentLoaded", () => {
      const form = document.getElementById("new-post-form");
      if (form) {
        form.addEventListener("submit", (e) => {
          e.preventDefault();
          const key = document.getElementById("post-key").value;
          const error = document.getElementById("post-key-error");
          if (CRUD.retrievePost(key) && !form.dataset.editing) {
            error.style.display = "block";
            return;
          }
          error.style.display = "none";
          const post = {
            key,
            headline: document.getElementById("post-headline").value,
            teaser: document.getElementById("post-teaser").value,
            content: document.getElementById("post-content").value,
            image: document.getElementById("post-image").files[0]
              ? URL.createObjectURL(document.getElementById("post-image").files[0])
              : "images/default.jpg",
            date: document.getElementById("post-date").value || new Date().toISOString().split("T")[0],
          };
          CRUD.createPost(post.key, post);
          renderPosts();
          e.target.reset();
          form.dataset.editing = "";
        });
      }
    }); 

 
 




</script>
</head>

<body class="w3-theme-l5">
  <!-- Navbar -->
  <div class="w3-top">
    <div class="w3-bar w3-theme-d2 w3-left-align w3-large">
      <a class="w3-bar-item w3-button w3-hide-medium w3-hide-large w3-right w3-padding-large w3-hover-white w3-large w3-theme-d2" href="javascript:void(0);" onclick="openNav()"><i class="fa fa-bars"></i></a>
      <a href="#" class="w3-bar-item w3-button w3-padding-large w3-theme-d4"><i class="fa fa-home w3-margin-right"></i>Logo</a>
      <a href="#" class="w3-bar-item w3-button w3-hide-small w3-padding-large w3-hover-white" title="News"><i class="fa fa-globe"></i></a>
      <a href="#" class="w3-bar-item w3-button w3-hide-small w3-padding-large w3-hover-white" title="Account Settings"><i class="fa fa-user"></i></a>
      <a href="#" class="w3-bar-item w3-button w3-hide-small w3-padding-large w3-hover-white" title="Messages"><i class="fa fa-envelope"></i></a>
      <div class="w3-dropdown-hover w3-hide-small">
        <button class="w3-button w3-padding-large" title="Notifications"><i class="fa fa-bell"></i><span class="w3-badge w3-right w3-small w3-green">3</span></button>
        <div class="w3-dropdown-content w3-card-4 w3-bar-block" style="width:300px">
          <a href="#" class="w3-bar-item w3-button">One old friend request</a>
          <a href="#" class="w3-bar-item w3-button">John Doe posted on your wall</a>
          <a href="#" class="w3-bar-item w3-button">Jane likes your post</a>
        </div>
      </div>
      <a href="#" class="w3-bar-item w3-button w3-hide-small w3-right w3-padding-large w3-hover-white" title="My Account">
        <img src="https://w3schools.com/w3images/avatar2.png" class="w3-circle" style="height:23px;width:23px" alt="Avatar">
      </a>
    </div>
  </div>

  <!-- Navbar on small screens -->
  <div id="navDemo" class="w3-bar-block w3-theme-d2 w3-hide w3-hide-large w3-hide-medium w3-large">
    <a href="#" class="w3-bar-item w3-button w3-padding-large">Link 1</a>
    <a href="#" class="w3-bar-item w3-button w3-padding-large">Link 2</a>
    <a href="#" class="w3-bar-item w3-button w3-padding-large">Link 3</a>
    <a href="#" class="w3-bar-item w3-button w3-padding-large">My Profile</a>
  </div>

  <!-- Page Container -->
  <div class="w3-container w3-content" style="max-width:1400px;margin-top:80px">
    <!-- The Grid -->
    <div class="w3-row">
      <!-- Left Column -->
      <div class="w3-col m2">
        <!-- Profile -->
        <div class="w3-card w3-round w3-white">
          <div class="w3-container">
            <h4 class="w3-center">My Profile Here</h4>
            <p class="w3-center"><img src="https://w3schools.com/w3images/avatar3.png" class="w3-circle" style="height:106px;width:106px" alt="Profile picture"></p>
            <hr>
            <p><i class="fa fa-pencil fa-fw w3-margin-right w3-text-theme"></i> Designer, UI</p>
            <p><i class="fa fa-home fa-fw w3-margin-right w3-text-theme"></i> London, UK</p>
            <p><i class="fa fa-birthday-cake fa-fw w3-margin-right w3-text-theme"></i> April 1, 1988</p>
          </div>
        </div>
        <br>

        <!-- Accordion -->
        <div class="w3-card w3-round">
          <div class="w3-white">
            <button onclick="myFunction('Demo1')" class="w3-button w3-block w3-theme-l1 w3-left-align"><i class="fa fa-circle-o-notch fa-fw w3-margin-right"></i> My Groups</button>
            <div id="Demo1" class="w3-hide w3-container">
              <p>Some text..</p>
            </div>
            <button onclick="myFunction('Demo2')" class="w3-button w3-block w3-theme-l1 w3-left-align"><i class="fa fa-calendar-check-o fa-fw w3-margin-right"></i> My Events</button>
            <div id="Demo2" class="w3-hide w3-container">
              <p>Some other text..</p>
            </div>
            <button onclick="myFunction('Demo3')" class="w3-button w3-block w3-theme-l1 w3-left-align"><i class="fa fa-users fa-fw w3-margin-right"></i> My Photos</button>
            <div id="Demo3" class="w3-hide w3-container">
              <div class="w3-row-padding">
                <br>
                <div class="w3-half">
                  <img src="https://w3schools.com/w3images/lights.jpg" style="width:100%" class="w3-margin-bottom">
                </div>
                <div class="w3-half">
                  <img src="https://w3schools.com/w3images/nature.jpg" style="width:100%" class="w3-margin-bottom">
                </div>
                <div class="w3-half">
                  <img src="https://w3schools.com/w3images/mountains.jpg" style="width:100%" class="w3-margin-bottom">
                </div>
                <div class="w3-half">
                  <img src="https://w3schools.com/w3images/forest.jpg" style="width:100%" class="w3-margin-bottom">
                </div>
                <div class="w3-half">
                  <img src="https://w3schools.com/w3images/nature.jpg" style="width:100%" class="w3-margin-bottom">
                </div>
                <div class="w3-half">
                  <img src="https://w3schools.com/w3images/snow.jpg" style="width:100%" class="w3-margin-bottom">
                </div>
              </div>
            </div>
          </div>
        </div>
        <br>

        <!-- Interests -->
        <div class="w3-card w3-round w3-white w3-hide-small">
          <div class="w3-container">
            <p>Interests</p>
            <p>
              <span class="w3-tag w3-small w3-theme-d5">News</span>
              <span class="w3-tag w3-small w3-theme-d4">W3Schools</span>
              <span class="w3-tag w3-small w3-theme-d3">Labels</span>
              <span class="w3-tag w3-small w3-theme-d2">Games</span>
              <span class="w3-tag w3-small w3-theme-d1">Friends</span>
              <span class="w3-tag w3-small w3-theme">Games</span>
              <span class="w3-tag w3-small w3-theme-l1">Friends</span>
              <span class="w3-tag w3-small w3-theme-l2">Food</span>
              <span class="w3-tag w3-small w3-theme-l3">Design</span>
              <span class="w3-tag w3-small w3-theme-l4">Art</span>
              <span class="w3-tag w3-small w3-theme-l5">Photos</span>
            </p>
          </div>
        </div>
        <br>

        <!-- Alert Box -->
        <div class="w3-container w3-display-container w3-round w3-theme-l4 w3-border w3-theme-border w3-margin-bottom w3-hide-small">
          <span onclick="this.parentElement.style.display='none'" class="w3-button w3-theme-l3 w3-display-topright">
            <i class="fa fa-remove"></i>
          </span>
          <p><strong>Hey!</strong></p>
          <p>People are looking at your profile. Find out who.</p>
        </div>
      </div>

      <!-- Middle Column -->
      <div class="w3-col m7" style="padding:0px;">
        <div class="w3-row-padding">
          <div class="w3-col m12">
            <div class="w3-card w3-round w3-white">
              <div class="w3-container w3-padding">
                <div style="text-align:center">
                  <h1>BLOGGING FOR FUN</h1>
                </div>
                <div class="w3-container w3-card W3-FloralWhite w3-round w3-margin" style="margin-bottom:10px;padding:0px">
                  <br>
                  <div class="w3-container post-container">
                    <div class="w3-card-4 post-header" style="width:100%;margin-bottom:20px;border-radius: 5px;">
                      <header class="w3-container w3-light-grey">
                        <h3>Welcome</h3>
                      </header>
                      <div class="w3-container">
                        <img src="images/donavan.jpg" alt="Author's profile picture" class="w3-left w3-margin-right" style="width:150px;margin-bottom:10px">
                        <p>No one seems to blog for fun nowadays.</p><br>
                      </div>
                      <div style="height:60px;">
                        <button style="float:right;margin-top: 20px;margin-right:10px" onclick="togglePost.call(this)" aria-label="Toggle welcome post content">Read More</button>
                      </div>
                    </div>
                    <div class="content w3-justify">
                      <p>It seems that the world has moved on to other things, like TikTok, Instagram, and other social media. I remember when I first started blogging, it was a way to express myself and share my thoughts with the world. Now it seems that everyone is more interested in short videos and pictures than in reading long posts.</p>
                      <p>But I still love blogging. It allows me to think deeply about topics that interest me and share my ideas with others. I hope that one day people will return to blogging for fun, but until then, I will continue to write for myself.</p>
                    </div>
                  </div>

                  <div class="w3-container input-form" style="padding: 10px;">
                    <h3>Create New Post</h3>
                    <form id="new-post-form" class="w3-form">
                      <label for="post-key">Post Key (unique ID)</label>
                      <input type="text" id="post-key" class="w3-input w3-margin-bottom" placeholder="e.g., post-123" required aria-describedby="post-key-error">
                      <span id="post-key-error" class="w3-text-red" style="display:none;">Key must be unique.</span>
                      <label for="post-headline">Headline</label>
                      <input type="text" id="post-headline" class="w3-input w3-margin-bottom" placeholder="Post Headline" required>
                      <label for="post-teaser">Teaser</label>
                      <input type="text" id="post-teaser" class="w3-input w3-margin-bottom" placeholder="Short teaser text" required>
                      <label for="post-content">Content</label>
                      <textarea id="post-content" class="w3-input w3-margin-bottom" placeholder="Post content (supports HTML)" rows="5" required></textarea>
                      <label for="post-image">Image (optional)</label>
                      <input type="file" id="post-image" class="w3-input w3-margin-bottom" accept="image/*">
                      <label for="post-date">Date (optional, defaults to today)</label>
                      <input type="date" id="post-date" class="w3-input w3-margin-bottom">
                      <button type="submit" class="w3-button w3-theme-d2">Save Post</button>
                    </form>
                  </div>



                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Right Column -->
      <div class="w3-col m3">
        <div class="w3-card w3-round w3-white w3-center">
          <div class="w3-container">
            <div class="w3-container w3-center">
              <button class="w3-button w3-theme-l4" onclick="expandAll()">Expand All</button>
              <button class="w3-button w3-theme-l4" onclick="collapseAll()">Collapse All</button>
            </div>
            <p>All posts:</p>
            <div id="side-menu"></div>
          </div>
        </div>
        <br>
        <div class="w3-card w3-round w3-white w3-center">
          <div class="w3-container">
            <p>Upcoming Events:</p>
            <img src="https://w3schools.com/w3images/forest.jpg" alt="Forest" style="width:100%;">
            <p><strong>Holiday</strong></p>
            <p>Friday 15:00</p>
            <p><button class="w3-button w3-block w3-theme-l4">Info</button></p>
          </div>
        </div>
        <br>
        <div class="w3-card w3-round w3-white w3-center">
          <div class="w3-container">
            <p>Friend Request</p>
            <img src="https://w3schools.com/w3images/avatar6.png" alt="Avatar" style="width:50%"><br>
            <span>Jane Doe</span>
            <div class="w3-row w3-opacity">
              <div class="w3-half">
                <button class="w3-button w3-block w3-green w3-section" title="Accept"><i class="fa fa-check"></i></button>
              </div>
              <div class="w3-half">
                <button class="w3-button w3-block w3-red w3-section" title="Decline"><i class="fa fa-remove"></i></button>
              </div>
            </div>
          </div>
        </div>
        <br>
        <div class="w3-card w3-round w3-white w3-padding-16 w3-center">
          <p>ADS</p>
        </div>
        <br>
        <div class="w3-card w3-round w3-white w3-padding-32 w3-center">
          <p><i class="fa fa-bug w3-xxlarge"></i></p>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="w3-container w3-theme-d3 w3-padding-16">
    <h5>Footer</h5>
  </footer>
  <footer class="w3-container w3-theme-d5">
    <p>Powered by <a href="https://www.w3schools.com/w3css/default.asp" target="_blank">w3.css</a></p>
    <p><h6 class="w3-opacity">Social Media template by w3.css</h6></p>
  </footer>

  <script>
    // Accordion
    function myFunction(id) {
      var x = document.getElementById(id);
      if (x.className.indexOf("w3-show") == -1) {
        x.className += " w3-show";
        x.previousElementSibling.className += " w3-theme-d1";
      } else {
        x.className = x.className.replace("w3-show", "");
        x.previousElementSibling.className = x.previousElementSibling.className.replace(" w3-theme-d1", "");
      }
    }

    // Used to toggle the menu on smaller screens when clicking on the menu button
    function openNav() {
      var x = document.getElementById("navDemo");
      if (x.className.indexOf("w3-show") == -1) {
        x.className += " w3-show";
      } else {
        x.className = x.className.replace(" w3-show", "");
      }
    }
  </script>
</body>
</html>